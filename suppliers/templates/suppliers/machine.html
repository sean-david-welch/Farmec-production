{% extends 'main.html' %}
{% load static %}

{% block content %}

<section id="products" class="products">
    <div class="container">
        <div class="product-index">
            <h5>Product Index <div class="bottom-line-side"></div>
            </h5>
            {% for product in machine.product_set.all %}
            <h1><a href="#product-{{forloop.counter}}">{{forloop.counter}} - {{product.name}}</a>
            </h1>
            {% endfor %}
        </div>

        {% for product in machine.product_set.all %}
        <div class="product-grid" id="product-{{forloop.counter}}">
            <h1>
                {{product.name}} <div class="bottom-line-small"></div>
            </h1>
            <img src="{{product.imageurl}}" alt="product image">
            <p>{{product.description}}</p>

            {% if request.user.is_superuser %}
            <div class="form-buttons btn-nav">
                <a class="btn-small btn-secondary form-button" href="{% url 'update-product' pk=product.pk %}">Update
                    Product <i class="fa-sharp fa-solid fa-right-to-bracket"></i></a>
                <a class="btn-small btn-secondary form-button" href="{% url 'delete-product' pk=product.pk %}">Delete
                    Product <i class="fa-sharp fa-solid fa-right-to-bracket"></i></a>
            </div>
            {% endif %}
            {% if forloop.counter < machine.product_set.count %} <a href="#product-{{forloop.counter|add:1}}"
                class="btn btn-primary btn-loop">
                Other Models<i class="fa-sharp fa-solid fa-circle-chevron-down"></i>
                </a>
                {% endif %}
        </div>
    </div>
    {% endfor %}
    {% if request.user.is_superuser %}
    <button class="form-buttons btn-nav btn-create">
        <a class="btn-small btn-primary form-buttom" href="{% url 'create-product' %}">Create Product <i
                class="fa-sharp fa-solid fa-right-to-bracket"></i></a>
    </button>
    {% endif %}
</section>

{% endblock content %}